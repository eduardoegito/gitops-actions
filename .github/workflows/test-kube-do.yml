name: Test Kubernetes DigitalOcean

on:
  push:
    branches:
      - main
    paths:
      - '.github/workflows/test-kube-*.yml'
      - 'kube-do-action/**'

jobs:
  test-kube-do:
    name: Test
    runs-on: ubuntu-latest
    steps:
      # TODO private repository only
      - name: Checkout
        uses: actions/checkout@v3

      - name: Test input
        uses: ./kube-do-action
        id: test-input
        with:
          github-token: ${{ github.token }} # TODO remove, see actions/checkout
          access-token: TODO_SECRET_ACCESS_TOKEN
          config-path: examples/kube-do-sample.yaml
          enabled: false

      - name: Test output
        run: echo "Output status ${{ steps.test-input.outputs.status }}"
